"use strict";(self.webpackChunkfoodstorecms=self.webpackChunkfoodstorecms||[]).push([[594],{594:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});const s=n(6213).A.create({baseURL:"http://localhost:8080/api/v1",withCredentials:!1,headers:{"Content-type":"application/json"}});s.interceptors.response.use((e=>e),(e=>{var t,n;const s=(null===(t=e.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.err)||"An unknown error occurred";return Promise.reject(s)}));const a=s,o={login:async function(e){try{return(await a.post("/login",e)).data}catch(t){throw t}}};var r=n(5043),c=n(2773),i=n(7476),l=n(3216);class d extends Error{}function p(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return function(e){return decodeURIComponent(atob(e).replace(/(.)/g,((e,t)=>{let n=t.charCodeAt(0).toString(16).toUpperCase();return n.length<2&&(n="0"+n),"%"+n})))}(t)}catch(n){return atob(t)}}d.prototype.name="InvalidTokenError";const u="Login_loginContainer__jt90+",m="Login_loginForm__zY98K",g="Login_formGroup__1LEAz",h="Login_loginInput__Wvaav",f="Login_fieldIcon__csBX0",v="Login_loginButton__+Zu9r";var w=n(579);const _=function(){const[e,t]=(0,r.useState)(null),[,n]=(0,i.lT)(["token"]),s=(0,l.Zp)(),[a,_]=(0,r.useState)(!1);return(0,w.jsx)("div",{className:"".concat(u," ps-4 pe-4"),children:(0,w.jsxs)("div",{className:"".concat(m," col-md-6 col-lg-4 col-12"),children:[(0,w.jsx)("h3",{className:"mb-4 text-center fs-2 fw-bolder",children:"Login"}),(0,w.jsxs)("form",{onSubmit:async e=>{var a,r,i,l;e.preventDefault();const u={username:null!==(a=null===(r=e.target.username)||void 0===r?void 0:r.value)&&void 0!==a?a:null,password:null!==(i=null===(l=e.target.password)||void 0===l?void 0:l.value)&&void 0!==i?i:null};try{const a=await o.login(u);if(a.success){c.A.success(a.message),n("token",a.data.token,{path:"/"});const t=function(t,n){if("string"!==typeof t)throw new d("Invalid token specified: must be a string");n||(n={});const s=!0===n.header?0:1,a=t.split(".")[s];if("string"!==typeof a)throw new d("Invalid token specified: missing part #".concat(s+1));let o;try{o=p(a)}catch(e){throw new d("Invalid token specified: invalid base64 for part #".concat(s+1," (").concat(e.message,")"))}try{return JSON.parse(o)}catch(e){throw new d("Invalid token specified: invalid json for part #".concat(s+1," (").concat(e.message,")"))}}(a.data.token);localStorage.setItem("admin",JSON.stringify(t)),s("/cms/home")}else t(!0),c.A.error(a.message)}catch(m){c.A.error(m.message)}},children:[(0,w.jsx)("div",{className:g,children:(0,w.jsx)("input",{type:"text",className:h,name:"username",placeholder:"Username",required:!0})}),(0,w.jsxs)("div",{className:g,children:[(0,w.jsx)("input",{id:"password-field",name:"password",type:a?"text":"password",className:h,placeholder:"Password",required:!0}),(0,w.jsx)("span",{onClick:()=>{_(!a)},className:"".concat(f," fa fa-fw ").concat(a?"fa-eye-slash":"fa-eye"," toggle-password")})]}),e&&(0,w.jsx)("p",{className:"text-danger mt-3 text-center fw-semibold mb-2",children:"Incorrect username or password"}),(0,w.jsx)("div",{children:(0,w.jsx)("button",{type:"submit",className:v,children:"Sign In"})})]})]})})}}}]);
//# sourceMappingURL=594.88422ea9.chunk.js.map