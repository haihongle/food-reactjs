"use strict";(self.webpackChunkfoodstorecms=self.webpackChunkfoodstorecms||[]).push([[736],{8488:(t,e,a)=>{a.d(e,{A:()=>c});var n=a(6213);const s=new(a(4750).A),o=n.A.create({baseURL:"http://localhost:8080/api/v1",headers:{"Content-type":"application/json"}});o.interceptors.request.use((t=>{const e=s.get("token");return e&&(t.headers.Authorization="Bearer ".concat(e)),t}),(t=>Promise.reject(t))),o.interceptors.response.use((t=>t),(t=>{var e,a;const n=(null===(e=t.response)||void 0===e||null===(a=e.data)||void 0===a?void 0:a.err)||"An unknown error occurred";return Promise.reject(n)}));const c=o},3843:(t,e,a)=>{a.d(e,{A:()=>o});var n=a(4527),s=a(579);const o=function(t){let{pageCount:e,paginateFunction:a,modalID:o,buttonName:c}=t;return(0,s.jsxs)("div",{className:"card-header d-flex ".concat(c?" justify-content-between":" justify-content-end"),children:[c&&(0,s.jsx)("div",{children:(0,s.jsx)("button",{type:"button",className:"btn btn-primary","data-bs-toggle":"modal","data-bs-target":o,children:c})}),e>0&&(0,s.jsx)(n.A,{pageCount:e,handlePageClick:a})]})}},4527:(t,e,a)=>{a.d(e,{A:()=>i});const n={pagination:"CustomPagination_pagination__N5HUP",active:"CustomPagination_active__HzbBN","break-me":"CustomPagination_break-me__LfnQx"};var s=a(2157),o=a.n(s),c=a(579);const i=function(t){let{pageCount:e,handlePageClick:a}=t;return(0,c.jsx)(o(),{previousLabel:"<<",nextLabel:">>",breakLabel:"...",pageCount:e,marginPagesDisplayed:1,pageRangeDisplayed:1,onPageChange:a,containerClassName:n.pagination,activeClassName:n.active,breakClassName:n.breakMe})}},7836:(t,e,a)=>{a.d(e,{A:()=>h});const n="CustomTable_tableContainer__-33Xc",s="CustomTable_tableManage__t1C12",o="CustomTable_tableTrue__p8Hxx",c="CustomTable_tableFalse__fEl5c",i="CustomTable_dangerBackground__ohzgE",l="CustomTable_warningBackground__uRHln";var r=a(4571),d=a(7943),m=(a(9191),a(579));function u(t){const e=t.replace(/([a-z])([A-Z])/g,"$1 $2");return e.charAt(0).toUpperCase()+e.slice(1)}const h=t=>{let{data:e,actions:a,hiddenFields:h=[]}=t;const g=e&&e.length>0?Object.keys(e[0]).filter((t=>!h.includes(t))):[];return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"table-responsive",children:e&&e.length>0?(0,m.jsxs)("table",{className:"".concat(n),children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{className:"text-center",children:"No."}),g.map((t=>(0,m.jsx)("th",{className:"text-center",children:u(t)},t))),a&&(0,m.jsx)("th",{className:"".concat(s),children:"Manage"})]})}),(0,m.jsx)("tbody",{children:e.map(((t,e)=>{const n=(0,r.A)(t);return(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{className:"text-center ".concat("danger"===n.timeStatus?i:"warning"===n.timeStatus?l:""),children:e+1}),g.map(((t,e)=>{const a=n.timeStatus;return(0,m.jsx)("td",{className:"".concat("danger"===a?i:"warning"===a?l:""),children:"boolean"===typeof n[t]?(0,m.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:n[t]?(0,m.jsx)("i",{className:"".concat(o," fa-solid fa-circle-check")}):(0,m.jsx)("i",{className:"".concat(c," fa-solid fa-circle-xmark")})}):n[t]},t)})),a&&(0,m.jsxs)("td",{className:"".concat(s," text-nowrap"),children:[a.detail&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{"data-tooltip-id":"detail-tooltip","data-tooltip-content":"Show detail","data-tooltip-delay-show":"50","data-tooltip-place":"top-end",className:"btn btn-sm btn-primary me-1",onClick:()=>a.detail(t.id),children:(0,m.jsx)("i",{className:"fa-solid fa-eye"})}),(0,m.jsx)(d.m_,{id:"detail-tooltip"})]}),a.delete&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{"data-tooltip-id":"delete-tooltip","data-tooltip-content":"Delete","data-tooltip-delay-show":"50","data-tooltip-place":"top-end",className:"btn btn-sm btn-danger",onClick:()=>a.delete(t.id),children:(0,m.jsx)("i",{className:"fa-solid fa-trash"})}),(0,m.jsx)(d.m_,{id:"delete-tooltip"})]}),a.toggle&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("button",{"data-tooltip-id":"toggle-tooltip","data-tooltip-content":a.toggle.tooltip,"data-tooltip-delay-show":"50","data-tooltip-place":"top-end",className:"btn btn-sm btn-secondary",onClick:()=>a.toggle.function(t.id),children:(0,m.jsx)("i",{className:"fa-solid fa-pen-to-square"})}),(0,m.jsx)(d.m_,{id:"toggle-tooltip"})]})]})]},t.id||e)}))})]}):(0,m.jsxs)("div",{className:"d-flex align-items-center justify-content-center",children:[(0,m.jsx)("img",{className:"user-avatar",src:"/Nothing.png",alt:""}),(0,m.jsx)("h1",{className:"m-0 ps-1 fw-semibold text-secondary",children:"THERE IS NO DATA"})]})})})}},4569:(t,e,a)=>{a.r(e),a.d(e,{default:()=>u});var n=a(5043),s=a(8488);const o="inventory",c={getList:async function(t){try{return(await s.A.get(o,{params:t})).data}catch(e){throw e}},closeInventory:async function(t){try{return(await s.A.post(o,t)).data}catch(e){throw e}},getDetail:async function(t){try{return(await s.A.get("/inventory/".concat(t))).data}catch(e){throw e}},deleteDish:async function(t){try{return(await s.A.delete("/inventory/".concat(t))).data}catch(e){throw e}}};var i=a(7836),l=a(3843),r=a(2773),d=a(3737),m=a(579);const u=function(){const[t,e]=(0,n.useState)([]),[a,s]=(0,n.useState)(null),[o,u]=(0,n.useState)(null),h=(JSON.parse(localStorage.getItem("user")),(0,n.useRef)()),[g,p]=(0,n.useState)({page:0,size:10});(0,n.useEffect)((()=>{b()}),[g]);const b=async()=>{try{const a=await c.getList(g);if(a.success){const n=await(t=a.data,t.map((t=>(t.timeStatus=d.A.calculateInventoryTime(t.createdAt,t.shelfLife),t))));e(n),s(a.metaData.totalPage)}else r.A.error(a.message)}catch(a){r.A.error(a)}var t};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("div",{className:"modal fade","data-bs-backdrop":"static",tabIndex:"-1",id:"closeInventoryModal",children:(0,m.jsx)("div",{className:"modal-dialog",children:(0,m.jsxs)("div",{className:"modal-content",children:[(0,m.jsxs)("div",{className:"modal-header",children:[(0,m.jsx)("h5",{className:"modal-title",children:"Closing inventory"}),(0,m.jsx)("button",{className:"btn btn-sm btn-danger",type:"button","data-bs-dismiss":"modal",children:"X"})]}),(0,m.jsx)("div",{className:"modal-body",children:(0,m.jsx)("textarea",{className:"form-control",placeholder:"Description...",ref:h})}),(0,m.jsxs)("div",{className:"modal-footer",children:[(0,m.jsx)("button",{className:"btn btn-sm btn-primary",onClick:async()=>{const t={description:h.current.value,isManualClosing:!0};try{const e=await c.closeInventory(t);e.success&&(h.current.value="",r.A.success(e.message))}catch(e){r.A.error(e)}},children:"Confirm"}),(0,m.jsx)("button",{className:"btn btn-sm btn-danger","data-bs-dismiss":"modal",onClick:()=>{h.current.value=""},children:"Cancel"})]})]})})}),(0,m.jsx)(l.A,{pageCount:a,paginateFunction:t=>{let{selected:e}=t;p({page:e,size:10})},modalID:"#closeInventoryModal",buttonName:"Closing inventory"}),(0,m.jsx)("div",{className:"card-body",children:(0,m.jsx)(i.A,{data:t,hiddenFields:["id","updatedBy","updatedAt","inventoryHistoryId","timeStatus","lifeLeft"]})})]})}},3737:(t,e,a)=>{a.d(e,{A:()=>o});var n=a(6178),s=a.n(n);const o={calculateOrderTime:t=>{const e=s()(t),a=s()();return e.clone().add(30,"minutes").diff(a)<0?"danger":e.clone().add(15,"minutes").diff(a)<0?"warning":"fine"},calculateInventoryTime:function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3;const n=s()(t),o=s()(),c=n.clone().add(e,"days");return console.log(n,c),c.diff(o)<0?"danger":c.diff(o)<=24*a*60*60*1e3?"warning":"fine"}}},4571:(t,e,a)=>{a.d(e,{A:()=>o});var n=a(6178),s=a.n(n);const o=t=>{const e={...t};return(t=>{const e=[];for(const a in t)if(t.hasOwnProperty(a)){const n=t[a];"string"===typeof n&&s()(n,s().ISO_8601,!0).isValid()&&e.push(a)}return e})(t).forEach((a=>{const n=t[a],o=s()(n,s().ISO_8601,!0);o.isValid()&&("0000-01-01"===o.format("YYYY-MM-DD")?e[a]=o.format("HH:mm"):"00:00:00"!==o.format("HH:mm:ss")?e[a]=o.format("DD/MM/YYYY - HH:mm"):e[a]=o.format("DD/MM/YYYY"))})),e}}}]);
//# sourceMappingURL=736.50b3a286.chunk.js.map