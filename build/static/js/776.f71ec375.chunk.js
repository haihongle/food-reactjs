"use strict";(self.webpackChunkfoodstorecms=self.webpackChunkfoodstorecms||[]).push([[776],{6340:(e,a,t)=>{t.r(a),t.d(a,{default:()=>c});var s=t(5043),i=t(3280),l=t(7459),d=t(3888),n=t(7836),u=t(3843),o=t(9280),r=t(6747),m=t(579);const c=function(){const[e,a]=(0,s.useState)([]),[t,c]=(0,s.useState)(0),[p,b]=(0,s.useState)(null),A=JSON.parse(localStorage.getItem("user")),[g,f]=(0,s.useState)({page:0,size:10});(0,s.useEffect)((()=>{h()}),[g]);const h=async()=>{await l.A.get(d.A.getList,g,(e=>{a(e),c(Math.ceil(e.length/g.size))}))};return(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(r.A,{title:"Add new customer",properties:[{label:"Full name",field:"fullname",type:"text",validation:i.Yj().required("Username is required"),className:"col-md-6"},{label:"Email",field:"email",type:"text",validation:i.Yj().email("Invalid email format").required("Email is required"),className:"col-md-6"},{label:"Phone number",field:"phonenumber",type:"number",validation:i.Yj().matches(/^(?:\d{10}|\d{11})$/,"Phone number must be 10 or 11 digits").required("Phone number is required"),className:"col-md-6"},{label:"Age",field:"age",type:"number",validation:i.ai().positive("Age must be positive").required("Age is required"),className:"col-md-6"}],modalID:"customerModal",submitFunction:e=>(async e=>{await l.A.add(d.A.addNew,e,h)})(e)}),(0,m.jsx)(o.A,{detailData:p,actions:{update:async(e,a)=>{a.updatedBy=(null===A||void 0===A?void 0:A.username)||null,await l.A.update(d.A.updateCustomer,e.customerId,a,(async e=>{await(async e=>{const a=await l.A.detail(d.A.getDetail,e);b(a)})(e),await h()}))}}}),(0,m.jsx)(u.A,{pageCount:t,paginateFunction:e=>{let{selected:a}=e;f({page:a,size:10})},modalID:"#customerModal",buttonName:"Add new customer"}),(0,m.jsx)("div",{className:"card-body",children:(0,m.jsx)(n.A,{data:e})})]})}}}]);
//# sourceMappingURL=776.f71ec375.chunk.js.map