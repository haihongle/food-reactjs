{"version":3,"file":"static/js/594.88422ea9.chunk.js","mappings":"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","sources":["api/loginApi.js","services/userServices/AuthenServices.js","../node_modules/jwt-decode/build/esm/index.js","webpack://foodstorecms/./src/pages/login/Login.module.scss?ba59","pages/login/Login.js"],"sourcesContent":["import axios from 'axios';\r\n\r\nconst baseURL = 'http://localhost:8080/api/v1';\r\n\r\nconst appLogin = axios.create({\r\n\tbaseURL,\r\n\twithCredentials: false,\r\n\theaders: {\r\n\t\t'Content-type': 'application/json',\r\n\t},\r\n});\r\n\r\nappLogin.interceptors.response.use(\r\n\t(response) => response,\r\n\t(error) => {\r\n\t\tconst errMessage = error.response?.data?.err || 'An unknown error occurred';\r\n\t\treturn Promise.reject(errMessage);\r\n\t}\r\n);\r\n\r\nexport default appLogin;\r\n","import appLogin from '../../api/loginApi';\r\n\r\nconst login = async function (data) {\r\n\ttry {\r\n\t\tconst response = await appLogin.post('/login', data);\r\n\t\treturn response.data;\r\n\t} catch (error) {\r\n\t\tthrow error;\r\n\t}\r\n};\r\n\r\nconst authenServices = {\r\n\tlogin,\r\n};\r\n\r\nexport default authenServices;\r\n","export class InvalidTokenError extends Error {\n}\nInvalidTokenError.prototype.name = \"InvalidTokenError\";\nfunction b64DecodeUnicode(str) {\n    return decodeURIComponent(atob(str).replace(/(.)/g, (m, p) => {\n        let code = p.charCodeAt(0).toString(16).toUpperCase();\n        if (code.length < 2) {\n            code = \"0\" + code;\n        }\n        return \"%\" + code;\n    }));\n}\nfunction base64UrlDecode(str) {\n    let output = str.replace(/-/g, \"+\").replace(/_/g, \"/\");\n    switch (output.length % 4) {\n        case 0:\n            break;\n        case 2:\n            output += \"==\";\n            break;\n        case 3:\n            output += \"=\";\n            break;\n        default:\n            throw new Error(\"base64 string is not of the correct length\");\n    }\n    try {\n        return b64DecodeUnicode(output);\n    }\n    catch (err) {\n        return atob(output);\n    }\n}\nexport function jwtDecode(token, options) {\n    if (typeof token !== \"string\") {\n        throw new InvalidTokenError(\"Invalid token specified: must be a string\");\n    }\n    options || (options = {});\n    const pos = options.header === true ? 0 : 1;\n    const part = token.split(\".\")[pos];\n    if (typeof part !== \"string\") {\n        throw new InvalidTokenError(`Invalid token specified: missing part #${pos + 1}`);\n    }\n    let decoded;\n    try {\n        decoded = base64UrlDecode(part);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid base64 for part #${pos + 1} (${e.message})`);\n    }\n    try {\n        return JSON.parse(decoded);\n    }\n    catch (e) {\n        throw new InvalidTokenError(`Invalid token specified: invalid json for part #${pos + 1} (${e.message})`);\n    }\n}\n","// extracted by mini-css-extract-plugin\nexport default {\"loginContainer\":\"Login_loginContainer__jt90+\",\"loginForm\":\"Login_loginForm__zY98K\",\"formGroup\":\"Login_formGroup__1LEAz\",\"loginInput\":\"Login_loginInput__Wvaav\",\"fieldIcon\":\"Login_fieldIcon__csBX0\",\"loginButton\":\"Login_loginButton__+Zu9r\"};","import authenServices from '../../services/userServices/AuthenServices';\r\nimport { useState } from 'react';\r\nimport Toast from '../../components/toast-message/ToastMessage';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useNavigate } from 'react-router';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport style from './Login.module.scss';\r\n\r\nfunction Login() {\r\n\tconst [loginError, setLoginError] = useState(null);\r\n\tconst [, setCookie] = useCookies(['token']);\r\n\tconst navigate = useNavigate();\r\n\tconst [passwordVisible, setPasswordVisible] = useState(false);\r\n\r\n\tconst submitLogin = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst data = {\r\n\t\t\tusername: e.target.username?.value ?? null,\r\n\t\t\tpassword: e.target.password?.value ?? null,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await authenServices.login(data);\r\n\t\t\tif (response.success) {\r\n\t\t\t\tToast.success(response.message);\r\n\t\t\t\tsetCookie('token', response.data.token, { path: '/' });\r\n\t\t\t\tconst decodedToken = jwtDecode(response.data.token);\r\n\t\t\t\tlocalStorage.setItem('admin', JSON.stringify(decodedToken));\r\n\t\t\t\tnavigate('/cms/home');\r\n\t\t\t} else {\r\n\t\t\t\tsetLoginError(true);\r\n\t\t\t\tToast.error(response.message);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tToast.error(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handlePassword = () => {\r\n\t\tsetPasswordVisible(!passwordVisible);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={`${style.loginContainer} ps-4 pe-4`}>\r\n\t\t\t<div className={`${style.loginForm} col-md-6 col-lg-4 col-12`}>\r\n\t\t\t\t<h3 className=\"mb-4 text-center fs-2 fw-bolder\">Login</h3>\r\n\t\t\t\t<form onSubmit={submitLogin}>\r\n\t\t\t\t\t<div className={style.formGroup}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclassName={style.loginInput}\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={style.formGroup}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tid=\"password-field\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype={passwordVisible ? 'text' : 'password'}\r\n\t\t\t\t\t\t\tclassName={style.loginInput}\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tonClick={handlePassword}\r\n\t\t\t\t\t\t\tclassName={`${style.fieldIcon} fa fa-fw ${passwordVisible ? 'fa-eye-slash' : 'fa-eye'} toggle-password`}\r\n\t\t\t\t\t\t></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{loginError && (\r\n\t\t\t\t\t\t<p className=\"text-danger mt-3 text-center fw-semibold mb-2\">\r\n\t\t\t\t\t\t\tIncorrect username or password\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type=\"submit\" className={style.loginButton}>\r\n\t\t\t\t\t\t\tSign In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Login;\r\n"],"names":["appLogin","axios","create","baseURL","withCredentials","headers","interceptors","response","use","error","_error$response","_error$response$data","errMessage","data","err","Promise","reject","login","async","post","InvalidTokenError","Error","base64UrlDecode","str","output","replace","length","decodeURIComponent","atob","m","p","code","charCodeAt","toString","toUpperCase","b64DecodeUnicode","prototype","name","loginError","setLoginError","useState","setCookie","useCookies","navigate","useNavigate","passwordVisible","setPasswordVisible","_jsx","className","concat","style","children","_jsxs","onSubmit","_e$target$username$va","_e$target$username","_e$target$password$va","_e$target$password","e","preventDefault","username","target","value","password","authenServices","success","Toast","message","token","path","decodedToken","options","pos","header","part","split","decoded","JSON","parse","jwtDecode","localStorage","setItem","stringify","type","placeholder","required","id","onClick","handlePassword"],"sourceRoot":""}