{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.heartbeat = heartbeat;\nvar constants_1 = require(\"./constants\");\nfunction heartbeat(ws, options) {\n  var _a = options || {},\n    _b = _a.interval,\n    interval = _b === void 0 ? constants_1.DEFAULT_HEARTBEAT.interval : _b,\n    _c = _a.timeout,\n    timeout = _c === void 0 ? constants_1.DEFAULT_HEARTBEAT.timeout : _c,\n    _d = _a.message,\n    message = _d === void 0 ? constants_1.DEFAULT_HEARTBEAT.message : _d;\n  var messageAccepted = false;\n  var pingTimer = setInterval(function () {\n    try {\n      if (typeof message === 'function') {\n        ws.send(message());\n      } else {\n        ws.send(message);\n      }\n    } catch (error) {\n      // do nothing\n    }\n  }, interval);\n  var timeoutTimer = setInterval(function () {\n    if (!messageAccepted) {\n      ws.close();\n    } else {\n      messageAccepted = false;\n    }\n  }, timeout);\n  ws.addEventListener(\"close\", function () {\n    clearInterval(pingTimer);\n    clearInterval(timeoutTimer);\n  });\n  return function () {\n    messageAccepted = true;\n  };\n}","map":{"version":3,"names":["exports","heartbeat","constants_1","require","ws","options","_a","_b","interval","DEFAULT_HEARTBEAT","_c","timeout","_d","message","messageAccepted","pingTimer","setInterval","send","error","timeoutTimer","close","addEventListener","clearInterval"],"sources":["E:\\project-exam\\eProject---SEM-2\\node_modules\\react-use-websocket\\src\\lib\\heartbeat.ts"],"sourcesContent":["import { DEFAULT_HEARTBEAT } from \"./constants\";\nimport { HeartbeatOptions } from \"./types\";\n\nexport function heartbeat(ws: WebSocket, options?: HeartbeatOptions): () => void {\n  const {\n    interval = DEFAULT_HEARTBEAT.interval,\n    timeout = DEFAULT_HEARTBEAT.timeout,\n    message = DEFAULT_HEARTBEAT.message,\n  } = options || {};\n\n  let messageAccepted = false;\n\n  const pingTimer = setInterval(() => {\n    try {\n      if (typeof message === 'function') {\n        ws.send(message());\n      } else {\n        ws.send(message);\n      }\n    } catch (error) {\n      // do nothing\n    }\n  }, interval);\n\n  const timeoutTimer = setInterval(() => {\n    if (!messageAccepted) {\n      ws.close();\n    } else {\n      messageAccepted = false;\n    }\n  }, timeout);\n\n  ws.addEventListener(\"close\", () => {\n    clearInterval(pingTimer);\n    clearInterval(timeoutTimer);\n  });\n\n  return () => {\n    messageAccepted = true;\n  };\n}\n"],"mappings":";;;;;AAGAA,OAAA,CAAAC,SAAA,GAAAA,SAAA;AAHA,IAAAC,WAAA,GAAAC,OAAA;AAGA,SAAgBF,SAASA,CAACG,EAAa,EAAEC,OAA0B;EAC3D,IAAAC,EAAA,GAIFD,OAAO,IAAI,EAAE;IAHfE,EAAA,GAAAD,EAAA,CAAAE,QAAqC;IAArCA,QAAQ,GAAAD,EAAA,cAAGL,WAAA,CAAAO,iBAAiB,CAACD,QAAQ,GAAAD,EAAA;IACrCG,EAAA,GAAAJ,EAAA,CAAAK,OAAmC;IAAnCA,OAAO,GAAAD,EAAA,cAAGR,WAAA,CAAAO,iBAAiB,CAACE,OAAO,GAAAD,EAAA;IACnCE,EAAA,GAAAN,EAAA,CAAAO,OAAmC;IAAnCA,OAAO,GAAAD,EAAA,cAAGV,WAAA,CAAAO,iBAAiB,CAACI,OAAO,GAAAD,EACpB;EAEjB,IAAIE,eAAe,GAAG,KAAK;EAE3B,IAAMC,SAAS,GAAGC,WAAW,CAAC;IAC5B,IAAI;MACF,IAAI,OAAOH,OAAO,KAAK,UAAU,EAAE;QACjCT,EAAE,CAACa,IAAI,CAACJ,OAAO,EAAE,CAAC;MACpB,CAAC,MAAM;QACLT,EAAE,CAACa,IAAI,CAACJ,OAAO,CAAC;MAClB;IACF,CAAC,CAAC,OAAOK,KAAK,EAAE;MACd;IAAA;EAEJ,CAAC,EAAEV,QAAQ,CAAC;EAEZ,IAAMW,YAAY,GAAGH,WAAW,CAAC;IAC/B,IAAI,CAACF,eAAe,EAAE;MACpBV,EAAE,CAACgB,KAAK,EAAE;IACZ,CAAC,MAAM;MACLN,eAAe,GAAG,KAAK;IACzB;EACF,CAAC,EAAEH,OAAO,CAAC;EAEXP,EAAE,CAACiB,gBAAgB,CAAC,OAAO,EAAE;IAC3BC,aAAa,CAACP,SAAS,CAAC;IACxBO,aAAa,CAACH,YAAY,CAAC;EAC7B,CAAC,CAAC;EAEF,OAAO;IACLL,eAAe,GAAG,IAAI;EACxB,CAAC;AACH","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}