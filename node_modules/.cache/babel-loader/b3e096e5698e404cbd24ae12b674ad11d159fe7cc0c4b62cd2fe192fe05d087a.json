{"ast":null,"code":"import authenServices from'../../services/userServices/AuthenServices';import{useState}from'react';import Toast from'../../components/toast-message/ToastMessage';import{useCookies}from'react-cookie';import{useNavigate}from'react-router';import{jwtDecode}from'jwt-decode';import style from'./Login.module.scss';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){const[loginError,setLoginError]=useState(null);const[,setCookie]=useCookies(['token']);const navigate=useNavigate();const[passwordVisible,setPasswordVisible]=useState(false);const submitLogin=async e=>{var _e$target$username$va,_e$target$username,_e$target$password$va,_e$target$password;e.preventDefault();const data={username:(_e$target$username$va=(_e$target$username=e.target.username)===null||_e$target$username===void 0?void 0:_e$target$username.value)!==null&&_e$target$username$va!==void 0?_e$target$username$va:null,password:(_e$target$password$va=(_e$target$password=e.target.password)===null||_e$target$password===void 0?void 0:_e$target$password.value)!==null&&_e$target$password$va!==void 0?_e$target$password$va:null};try{const response=await authenServices.login(data);if(response.success){Toast.success(response.message);setCookie('token',response.data.token,{path:'/'});const decodedToken=jwtDecode(response.data.token);localStorage.setItem('admin',JSON.stringify(decodedToken));navigate('/cms/home');}else{setLoginError(true);Toast.error(response.message);}}catch(error){Toast.error(error.message);}};const handlePassword=()=>{setPasswordVisible(!passwordVisible);};return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(style.loginContainer,\" ps-4 pe-4\"),children:/*#__PURE__*/_jsxs(\"div\",{className:\"\".concat(style.loginForm,\" col-md-6 col-lg-4 col-12\"),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"mb-4 text-center fs-2 fw-bolder\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitLogin,children:[/*#__PURE__*/_jsx(\"div\",{className:style.formGroup,children:/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:style.loginInput,name:\"username\",placeholder:\"Username\",required:true})}),/*#__PURE__*/_jsxs(\"div\",{className:style.formGroup,children:[/*#__PURE__*/_jsx(\"input\",{id:\"password-field\",name:\"password\",type:passwordVisible?'text':'password',className:style.loginInput,placeholder:\"Password\",required:true}),/*#__PURE__*/_jsx(\"span\",{onClick:handlePassword,className:\"\".concat(style.fieldIcon,\" fa fa-fw \").concat(passwordVisible?'fa-eye-slash':'fa-eye',\" toggle-password\")})]}),loginError&&/*#__PURE__*/_jsx(\"p\",{className:\"text-danger mt-3 text-center fw-semibold mb-2\",children:\"Incorrect username or password\"}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:style.loginButton,children:\"Sign In\"})})]})]})});}export default Login;","map":{"version":3,"names":["authenServices","useState","Toast","useCookies","useNavigate","jwtDecode","style","jsx","_jsx","jsxs","_jsxs","Login","loginError","setLoginError","setCookie","navigate","passwordVisible","setPasswordVisible","submitLogin","e","_e$target$username$va","_e$target$username","_e$target$password$va","_e$target$password","preventDefault","data","username","target","value","password","response","login","success","message","token","path","decodedToken","localStorage","setItem","JSON","stringify","error","handlePassword","className","concat","loginContainer","children","loginForm","onSubmit","formGroup","type","loginInput","name","placeholder","required","id","onClick","fieldIcon","loginButton"],"sources":["C:/Users/ADMIN/Desktop/testproject/src/pages/login/Login.js"],"sourcesContent":["import authenServices from '../../services/userServices/AuthenServices';\r\nimport { useState } from 'react';\r\nimport Toast from '../../components/toast-message/ToastMessage';\r\nimport { useCookies } from 'react-cookie';\r\nimport { useNavigate } from 'react-router';\r\nimport { jwtDecode } from 'jwt-decode';\r\nimport style from './Login.module.scss';\r\n\r\nfunction Login() {\r\n\tconst [loginError, setLoginError] = useState(null);\r\n\tconst [, setCookie] = useCookies(['token']);\r\n\tconst navigate = useNavigate();\r\n\tconst [passwordVisible, setPasswordVisible] = useState(false);\r\n\r\n\tconst submitLogin = async (e) => {\r\n\t\te.preventDefault();\r\n\r\n\t\tconst data = {\r\n\t\t\tusername: e.target.username?.value ?? null,\r\n\t\t\tpassword: e.target.password?.value ?? null,\r\n\t\t};\r\n\r\n\t\ttry {\r\n\t\t\tconst response = await authenServices.login(data);\r\n\t\t\tif (response.success) {\r\n\t\t\t\tToast.success(response.message);\r\n\t\t\t\tsetCookie('token', response.data.token, { path: '/' });\r\n\t\t\t\tconst decodedToken = jwtDecode(response.data.token);\r\n\t\t\t\tlocalStorage.setItem('admin', JSON.stringify(decodedToken));\r\n\t\t\t\tnavigate('/cms/home');\r\n\t\t\t} else {\r\n\t\t\t\tsetLoginError(true);\r\n\t\t\t\tToast.error(response.message);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tToast.error(error.message);\r\n\t\t}\r\n\t};\r\n\r\n\tconst handlePassword = () => {\r\n\t\tsetPasswordVisible(!passwordVisible);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<div className={`${style.loginContainer} ps-4 pe-4`}>\r\n\t\t\t<div className={`${style.loginForm} col-md-6 col-lg-4 col-12`}>\r\n\t\t\t\t<h3 className=\"mb-4 text-center fs-2 fw-bolder\">Login</h3>\r\n\t\t\t\t<form onSubmit={submitLogin}>\r\n\t\t\t\t\t<div className={style.formGroup}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype=\"text\"\r\n\t\t\t\t\t\t\tclassName={style.loginInput}\r\n\t\t\t\t\t\t\tname=\"username\"\r\n\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className={style.formGroup}>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tid=\"password-field\"\r\n\t\t\t\t\t\t\tname=\"password\"\r\n\t\t\t\t\t\t\ttype={passwordVisible ? 'text' : 'password'}\r\n\t\t\t\t\t\t\tclassName={style.loginInput}\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<span\r\n\t\t\t\t\t\t\tonClick={handlePassword}\r\n\t\t\t\t\t\t\tclassName={`${style.fieldIcon} fa fa-fw ${passwordVisible ? 'fa-eye-slash' : 'fa-eye'} toggle-password`}\r\n\t\t\t\t\t\t></span>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t{loginError && (\r\n\t\t\t\t\t\t<p className=\"text-danger mt-3 text-center fw-semibold mb-2\">\r\n\t\t\t\t\t\t\tIncorrect username or password\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t)}\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<button type=\"submit\" className={style.loginButton}>\r\n\t\t\t\t\t\t\tSign In\r\n\t\t\t\t\t\t</button>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Login;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}