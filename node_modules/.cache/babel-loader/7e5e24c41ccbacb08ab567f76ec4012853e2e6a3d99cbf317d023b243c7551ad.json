{"ast":null,"code":"import{useEffect,useState,useRef}from'react';import InventoryService from'../../../../services/warehouseServices/InventoryService';import CustomTable from'../../../../components/custom-table/CustomTable';import CardHeader from'../../../../components/card-header/CardHeader';import Toast from'../../../../components/toast-message/ToastMessage';import calculateTime from'../../../../utils/CaculateTime';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";function calculateInventoryTime(inventory){return inventory.map(item=>{item.timeStatus=calculateTime.calculateInventoryTime(item.createdAt,item.shelfLife);return item;});}function Inventory(){const[currentInventory,setCurrentInventory]=useState([]);const[pageCount,setPageCount]=useState(null);const[detailData,setDetailData]=useState(null);const user=JSON.parse(localStorage.getItem('user'));const descriptionRef=useRef();const[pagination,setPagination]=useState({page:0,size:10});const paginate=_ref=>{let{selected}=_ref;setPagination({page:selected,size:10});};useEffect(()=>{getInventory();},[pagination]);const getInventory=async()=>{try{const response=await InventoryService.getList(pagination);if(response.success){const updatedInventory=await calculateInventoryTime(response.data);setCurrentInventory(updatedInventory);setPageCount(response.metaData.totalPage);}else{Toast.error(response.message);}}catch(error){Toast.error(error);}};const closeInventory=async()=>{const data={description:descriptionRef.current.value,isManualClosing:true};try{const response=await InventoryService.closeInventory(data);if(response.success){descriptionRef.current.value='';Toast.success(response.message);}}catch(error){Toast.error(error);}};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal fade\",\"data-bs-backdrop\":\"static\",tabIndex:\"-1\",id:\"closeInventoryModal\",children:/*#__PURE__*/_jsx(\"div\",{className:\"modal-dialog\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-header\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"modal-title\",children:\"Closing inventory\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",type:\"button\",\"data-bs-dismiss\":\"modal\",children:\"X\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"modal-body\",children:/*#__PURE__*/_jsx(\"textarea\",{className:\"form-control\",placeholder:\"Description...\",ref:descriptionRef})}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-primary\",onClick:closeInventory,children:\"Confirm\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-sm btn-danger\",\"data-bs-dismiss\":\"modal\",onClick:()=>{descriptionRef.current.value='';},children:\"Cancel\"})]})]})})}),/*#__PURE__*/_jsx(CardHeader,{pageCount:pageCount,paginateFunction:paginate,modalID:'#closeInventoryModal',buttonName:'Closing inventory'}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body\",children:/*#__PURE__*/_jsx(CustomTable,{data:currentInventory,hiddenFields:['id','updatedBy','updatedAt','inventoryHistoryId','timeStatus','lifeLeft']})})]});}export default Inventory;","map":{"version":3,"names":["useEffect","useState","useRef","InventoryService","CustomTable","CardHeader","Toast","calculateTime","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","calculateInventoryTime","inventory","map","item","timeStatus","createdAt","shelfLife","Inventory","currentInventory","setCurrentInventory","pageCount","setPageCount","detailData","setDetailData","user","JSON","parse","localStorage","getItem","descriptionRef","pagination","setPagination","page","size","paginate","_ref","selected","getInventory","response","getList","success","updatedInventory","data","metaData","totalPage","error","message","closeInventory","description","current","value","isManualClosing","children","className","tabIndex","id","type","placeholder","ref","onClick","paginateFunction","modalID","buttonName","hiddenFields"],"sources":["E:/project-exam/eProject---SEM-2/src/pages/cms/warehouse/inventory/Inventory.js"],"sourcesContent":["import { useEffect, useState, useRef } from 'react';\r\nimport InventoryService from '../../../../services/warehouseServices/InventoryService';\r\nimport CustomTable from '../../../../components/custom-table/CustomTable';\r\nimport CardHeader from '../../../../components/card-header/CardHeader';\r\nimport Toast from '../../../../components/toast-message/ToastMessage';\r\nimport calculateTime from '../../../../utils/CaculateTime';\r\n\r\nfunction calculateInventoryTime(inventory) {\r\n\treturn inventory.map((item) => {\r\n\t\titem.timeStatus = calculateTime.calculateInventoryTime(item.createdAt, item.shelfLife);\r\n\t\treturn item;\r\n\t});\r\n}\r\n\r\nfunction Inventory() {\r\n\tconst [currentInventory, setCurrentInventory] = useState([]);\r\n\tconst [pageCount, setPageCount] = useState(null);\r\n\tconst [detailData, setDetailData] = useState(null);\r\n\tconst user = JSON.parse(localStorage.getItem('user'));\r\n\tconst descriptionRef = useRef();\r\n\tconst [pagination, setPagination] = useState({\r\n\t\tpage: 0,\r\n\t\tsize: 10,\r\n\t});\r\n\r\n\tconst paginate = ({ selected }) => {\r\n\t\tsetPagination({\r\n\t\t\tpage: selected,\r\n\t\t\tsize: 10,\r\n\t\t});\r\n\t};\r\n\tuseEffect(() => {\r\n\t\tgetInventory();\r\n\t}, [pagination]);\r\n\r\n\tconst getInventory = async () => {\r\n\t\ttry {\r\n\t\t\tconst response = await InventoryService.getList(pagination);\r\n\t\t\tif (response.success) {\r\n\t\t\t\tconst updatedInventory = await calculateInventoryTime(response.data);\r\n\t\t\t\tsetCurrentInventory(updatedInventory);\r\n\t\t\t\tsetPageCount(response.metaData.totalPage)\r\n\t\t\t} else {\r\n\t\t\t\tToast.error(response.message);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tToast.error(error);\r\n\t\t}\r\n\t};\r\n\r\n\tconst closeInventory = async () => {\r\n\t\tconst data = {\r\n\t\t\tdescription: descriptionRef.current.value,\r\n\t\t\tisManualClosing: true,\r\n\t\t};\r\n\t\ttry {\r\n\t\t\tconst response = await InventoryService.closeInventory(data);\r\n\t\t\tif (response.success) {\r\n\t\t\t\tdescriptionRef.current.value = '';\r\n\t\t\t\tToast.success(response.message);\r\n\t\t\t}\r\n\t\t} catch (error) {\r\n\t\t\tToast.error(error);\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<div className=\"modal fade\" data-bs-backdrop=\"static\" tabIndex=\"-1\" id=\"closeInventoryModal\">\r\n\t\t\t\t<div className=\"modal-dialog\">\r\n\t\t\t\t\t<div className=\"modal-content\">\r\n\t\t\t\t\t\t<div className=\"modal-header\">\r\n\t\t\t\t\t\t\t<h5 className=\"modal-title\">Closing inventory</h5>\r\n\t\t\t\t\t\t\t<button className=\"btn btn-sm btn-danger\" type=\"button\" data-bs-dismiss=\"modal\">\r\n\t\t\t\t\t\t\t\tX\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-body\">\r\n\t\t\t\t\t\t\t<textarea\r\n\t\t\t\t\t\t\t\tclassName=\"form-control\"\r\n\t\t\t\t\t\t\t\tplaceholder=\"Description...\"\r\n\t\t\t\t\t\t\t\tref={descriptionRef}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div className=\"modal-footer\">\r\n\t\t\t\t\t\t\t<button className=\"btn btn-sm btn-primary\" onClick={closeInventory}>\r\n\t\t\t\t\t\t\t\tConfirm\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t\t<button\r\n\t\t\t\t\t\t\t\tclassName=\"btn btn-sm btn-danger\"\r\n\t\t\t\t\t\t\t\tdata-bs-dismiss=\"modal\"\r\n\t\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\t\tdescriptionRef.current.value = '';\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\tCancel\r\n\t\t\t\t\t\t\t</button>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<CardHeader\r\n\t\t\t\tpageCount={pageCount}\r\n\t\t\t\tpaginateFunction={paginate}\r\n\t\t\t\tmodalID={'#closeInventoryModal'}\r\n\t\t\t\tbuttonName={'Closing inventory'}\r\n\t\t\t/>\r\n\t\t\t<div className=\"card-body\">\r\n\t\t\t\t<CustomTable\r\n\t\t\t\t\tdata={currentInventory}\r\n\t\t\t\t\thiddenFields={[\r\n\t\t\t\t\t\t'id',\r\n\t\t\t\t\t\t'updatedBy',\r\n\t\t\t\t\t\t'updatedAt',\r\n\t\t\t\t\t\t'inventoryHistoryId',\r\n\t\t\t\t\t\t'timeStatus',\r\n\t\t\t\t\t\t'lifeLeft',\r\n\t\t\t\t\t]}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\nexport default Inventory;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}